{% extends "main/layout.html" %}
{% block content %}
{% load concat %}
{% load crispy_forms_tags %}
{% load always_escape %}

<h5 class="my-3"> {{page_header}}: {{root_object_title}} </h5>
<form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ children_formset.management_form }}
    {{ children_formset.non_form_errors }}
    {% crispy children_formset helper %}

    {% if not read_only %}
        <input type="submit" name="submit" value="Save">
        <input type="button" name="upload" value="Upload/Delete Files" onClick="window.location.href = './uploadfiles';">
    {% endif %}
    {% block extrabuttons %}{% endblock %}
    <input type="button" value="Back" onClick="javascript:history.go(-1);">
</form>

<script> 
  gitlab_user_token = "{{gitlab_user_token}}"

  $('textarea').each(function () {
    this.setAttribute('style', 'height:' + (this.scrollHeight) + 'px;overflow-y:hidden;');
    }).on('input', function () {
    this.style.height = 'auto';
    this.style.height = (this.scrollHeight) + 'px';
    console.log(this.scrollHeight)
  });
</script>

{% endblock content %}